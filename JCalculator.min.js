!function(){function n(n,r,t){return m.isNoVal(n)||m.isNoVal(r)?m.isNoVal(n)?r:n:(t="max"==t?n>r:n<r)?n:r}function r(n){if(!n.from)throw new Error("From is not defined","Error from");if(!n.select)throw new Error("Select is not defined","Error select");!function(n){var r=n.select,e=n.groupBy;if(!(r.sum||r.avg||r.count||r.max||r.min))return;if(r.col&&!n.groupBy)return;var i=t("",r.col);i=p(i);var o=[],u=!1;m.isArray(e)?m.map(e,function(n,r){o.push(n)}):m.isString(e)?o.push(e):m.isFunction(e)&&(o=[e]);for(var c=0,f=i.length;c<f;c++){for(var a=0;a<f;a++){if(i[c]==o[a]){u=!0;break}if(m.isObject(i[c])&&m.isObject(o[a])&&String(i[c])===String(o[a])){u=!0;break}}if(!u)throw new Error("groupBy should contain select.col","Error groupBy");u=!1}}(n)}function t(n,r){var t={};return m.isArray(r)?m.map(r,function(r){t[n+r]=r}):m.isObject(r)?m.forIn(r,function(n,r){t[n]=r}):m.isString(r)&&(t[n+r]=r),t}function e(r,t){var e={},i=r.length,o={};return m.map(r,function(r){m.isObjEmpty(t.colObj)||m.forIn(t.colObj,function(n,t){var i=m.isFunction(t)?t(r):r[t];e[n]=i}),m.isObjEmpty(t.sumObj)||m.forIn(t.sumObj,function(n,t){var i=m.isFunction(t)?t(r):r[t];e[n]?e[n]+=i||0:e[n]=i||0}),m.isObjEmpty(t.avgObj)||m.forIn(t.avgObj,function(n,t){o[n]||(o[n]=0);var i=m.isFunction(t)?t(r):r[t];e[n]?e[n]+=i||0:e[n]=i||0,(i||0==i)&&o[n]++}),m.isObjEmpty(t.maxObj)||m.forIn(t.maxObj,function(t,i){var o=m.isFunction(i)?i(r):r[i];e[t]=n(e[t],o,"max")}),m.isObjEmpty(t.minObj)||m.forIn(t.minObj,function(t,i){var o=m.isFunction(i)?i(r):r[i];e[t]=n(e[t],o,"min")}),m.isObjEmpty(t.countObj)||m.forIn(t.countObj,function(n,t){var o=m.isFunction(t)?t(r):r[t];switch(m.isUndefined(e[n])&&(e[n]=0),n){case"*"==t?n:"count_*":e[n]=i;break;default:m.isUndefined(o)||null==o||e[n]++}})}),m.forIn(t.avgObj,function(n,r){e[n]=e[n]/o[n]}),e}function i(n,r){if(!r)return n;if(m.isObject(r)&&!m.isFunction(r)){var t=l(r),e=p(r);n.sort(function(n,r){for(var i,o,u=t.length,c=0;c<u&&(i=t[c],o=e[c],n[i]===r[i]);c++);if(n[i]!==r[i]){if(n[i]>r[i]||void 0===r[i])return"desc"===o||"DESC"===o?-1:1;if(n[i]<r[i]||void 0===n[i])return"desc"===o||"DESC"===o?1:-1}return"desc"===o||"DESC"===o?r[i]-n[i]:n[i]-r[i]})}else m.isFunction(r)&&n.sort(r);return n}function o(n,r){if(!r&&0!=r)return n;var t=[],e=n.length,i=0;if(m.isNumber(r))e=r>e?e:r;else if(m.isArray(r)){if(r[0]>e)return[];r[0]<e&&(i=r[0]),e=r[0]+r[1]<e?r[0]+r[1]:e}for(;i<e;i++)t.push(n[i]);return t}var u="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this,c=(u.jc,Array.prototype),f=Object.prototype,a=(c.push,c.slice,f.toString),s=(f.hasOwnProperty,Array.isArray),l=Object.keys,p=Object.values?Object.values:function(n){return l(n).map(function(r){return n[r]})},m=(Object.create,function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)});"undefined"==typeof exports||exports.nodeType?u.jc=m:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=m),exports.jc=m),m.VERSION="1.0.0",m.map=function(n,r){return m.isArray(n)?n.map(r):[]},m.forIn=function(n,r){if(!m.isObject(n))return{};var t=0;for(var e in n)r(e,n[e],t),t++},m.filter=function(n,r){return m.isArray(n)?n.filter(r):[]},m.where=function(n,r){var t;if(m.isFunction(r))t=m.filter(n,r);else{if(!m.isObject(r))return[];t=m.filter(n,function(n){return l(r).every(function(t){return r[t]===n[t]})})}return t},m.limit=function(n,r){return o(n,r)},m.order=m.orderBy=function(n,r){return i(n,r)},m.tree=function(n,r){r.children||(r.children="children");var t;m.isString(r.retain)?t=[r.retain,r.id,r.parent]:m.isArray(r.retain)?((t=r.retain).push(r.id),t.push(r.parent)):m.isObject(r.retain)?((t=r.retain)[r.id]=r.id,t[r.parent]=r.parent):n=m.extend(!0,[],n),t&&(n=m.sql({select:{col:t},from:n}));var e={},i=m.groupBy(n,function(n){return n[r.id]==r.root&&(e=n),n[r.parent]});return m.map(n,function(n){var t=n[r.id];i[t]&&(n[r.children]=i[t])}),m.isObjEmpty(e)&&(e[r.children]=i[r.root]),e},m.extend=function(){var n,r,t,e,i,o,u=arguments[0]||{},c=1,f=arguments.length,a=!1;for("boolean"==typeof u&&(a=u,u=arguments[1]||{},c++),"object"==typeof u||m.isFunction(u)||(u={}),f===c&&(u=this,--c);c<f;c++)if(null!=(n=arguments[c]))for(r in n)t=u[r],u!==(e=n[r])&&(a&&e&&(m.isObject(e)||(i=m.isArray(e)))?(i?(i=!1,o=t&&m.isArray(t)?t:[]):o=t&&m.isObject(t)?t:{},u[r]=m.extend(a,o,e)):void 0!==e&&(u[r]=e));return u},m.unique=function(n){if(!n||0==n.length)return n;var r={},t=[];m.map(n,function(n){var t=JSON.stringify(n);r[t]=n});return m.forIn(r,function(n,r){t.push(r)}),t},m.spaceFix=function(n,r){if(!n||0==n.length)return n;var t=[];if(n[0][r.key]-r.start>0){(a={})[r.key]=r.start,m.map(r.zeroFill,function(n){a[n]=0}),n.unshift(a)}if(n[n.length-1][r.key]<r.end){(a={})[r.key]=r.end,m.map(r.zeroFill,function(n){a[n]=0}),n.push(a)}for(var e=1,i=n.length;e<i&&!(e>1e4);e++){var o=n[e][r.key]-n[e-1][r.key];if(o<=r.space)t.push(n[e]);else{for(var u=r.space,c=0,f=o/r.space;c<f-1&&!(c>1e4);c++){var a={};a[r.key]=parseInt(n[e-1][r.key])+parseInt(u),m.map(r.zeroFill,function(n){a[n]=0}),t.push(a),u+=r.space}t.push(n[e])}}return t.unshift(n[0]),t},m.keyArray=function(n,r){if(!n||0==n.length)return n;var t={};return m.map(n,function(n,e){m.map(r,function(r,e){t[r]||(t[r]=[]),t[r].push(n[r])})}),t},m.keyBreak=function(n,r){if(!n||0==n.length)return n;var t=[],e=r.key,i=r.value;return m.map(n,function(n){m.map(r.break,function(o){var u={};u[e]=o,u[i]=n[o],m.map(r.retain,function(r){u[r]=n[r]}),t.push(u)})}),t},m.max=function(n,r){if(!n||0==n.length)return n;var t;if(m.isString(r)){var e=r;r=function(n){return n[e]}}else m.isUndefined(r)&&(r=function(n){return n});return m.map(n,function(n){var e=t?r(t):t,i=n?r(n):n;t=m.isNoVal(e)||m.isNoVal(i)?m.isNoVal(e)?n:t:e>i?t:n}),t},m.min=function(n,r){if(!n||0==n.length)return n;var t;if(m.isString(r)){var e=r;r=function(n){return n[e]}}else m.isUndefined(r)&&(r=function(n){return n});return m.map(n,function(n){var e=t?r(t):t,i=n?r(n):n;t=m.isNoVal(e)||m.isNoVal(i)?m.isNoVal(e)?n:t:e<i?t:n}),t},m.group=m.groupBy=function(n,r){if(!n||0==n.length)return n;var t={};return m.map(n,function(n,e){var i=[];m.isArray(r)?m.map(r,function(r,t){m.isFunction(r)?i.push(r(n)):i.push(n[r])}):m.isString(r)?i.push(n[r]):m.isFunction(r)&&(i=r(n,e)),t[i]||(t[i]=[]),t[i].push(n)}),t},m.sql=function(n){if(r(n),0==n.from.length||!m.isArray(n.from))return[];var u,c,f,a,s;return u=function(n,r){return r?m.where(n,r):n}(n.from,n.where),c=function(n,r){var t;return m.forIn(r.select,function(n,r){t=!("col"==n)||t}),r.groupBy||t?r.groupBy||r.select.col?m.group(n,r.groupBy):{table:n}:n}(u,n),f=function(n,r){if(!r)return n;var t={sumObj:{},avgObj:{},maxObj:{},minObj:{},countObj:{}},i={};return m.forIn(r,function(n,r){var e=n.split("_"),i=e.shift(),o=e.join("_");switch(o=o.replace(/[1-9a-zA-z_\$\@]+/g,function(n){return"row['"+n+"']"}),i){case"sum":t.sumObj[n]=function(n){return new Function("row","return "+o)(n)};break;case"avg":t.avgObj[n]=function(n){return new Function("row","return "+o)(n)};break;case"max":t.maxObj[n]=function(n){return new Function("row","return "+o)(n)};break;case"min":t.minObj[n]=function(n){return new Function("row","return "+o)(n)};break;case"count":t.countObj[n]=function(n){return new Function("row","return "+o)(n)}}}),m.forIn(n,function(n,o,u,c){var f,a=e(o,t);for(var s in r)if(foo=new Function("return "+a[s]+r[s]),!(f=foo()))break;f&&(i[n]=o)}),i}(c,n.having),a=function(n,r){if(!r)throw new Error("Select is not defined","Error select");var i=[],o={};return r.col&&(o.colObj=t("",r.col)),r.sum&&(o.sumObj=t("sum_",r.sum)),r.avg&&(o.avgObj=t("avg_",r.avg)),r.max&&(o.maxObj=t("max_",r.max)),r.min&&(o.minObj=t("min_",r.min)),r.count&&(o.countObj=t("count_",r.count)),m.isArray(n)?m.map(n,function(n,r){var t=e([n],o);i.push(t)}):m.forIn(n,function(n,r,t,u){var c=e(r,o);i.push(c)}),i}(f,n.select),s=i(a,n.orderBy),o(s,n.limit)},m.isObjEmpty=function(n){for(var r in n)return!1;return!0},m.isNoVal=function(n){return m.isUndefined(n)||null==n||n!=n},m.isArray=s||function(n){return"[object Array]"===a.call(n)},m.isObject=function(n){return"object"===typeof n&&!m.isArray(n)&&!!n},m.map(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(n){m["is"+n]=function(r){return a.call(r)==="[object "+n+"]"}}),m.isUndefined=function(n){return void 0===n},"function"==typeof define&&define.amd&&define("jc",[],function(){return m})}();